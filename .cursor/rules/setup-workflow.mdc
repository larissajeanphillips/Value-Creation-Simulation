---
description: Setup workflow for configuring the web app based on user selections
alwaysApply: false
---

# Setup Workflow

This rule defines how to process the setup wizard inputs and customize the project.

## Trigger

Activated when user runs `/setup` command or says "set up my app", "configure my app", etc.

## Workflow Steps

### 1. Gather Context (via setup.md command)

The setup command collects:
- **Purpose**: Client project / Internal tool / Personal / Other
- **Description**: Free text describing what the app does
- **Features**: Multi-select of feature types
- **Visual inspiration**: Image or text description (optional)
- **App name**: What to call the app
- **Runtime**: Docker or local development

### 2. Apply Customizations

Based on collected inputs, modify the project:

#### App Name & Branding

Update these files with the app name:
- `ui/package.json` - name field
- `ui/index.html` - title tag
- `ui/src/App.tsx` - header component (if applicable)

#### Feature Scaffolding

For each selected feature, add the appropriate components:

**Dashboard & Charts:**
```
ui/src/components/Dashboard.tsx - Main dashboard page
ui/src/components/charts/ - Chart components (Bar, Line, Pie)
```

**Forms & Data Entry:**
```
ui/src/components/Forms.tsx - Form page
ui/src/components/forms/ - Form components (Input, Select, etc.)
```

**Data Analytics:**
```
ui/src/components/DataTable.tsx - Filterable data table
ui/src/components/filters/ - Filter components
```

**AI Chatbot:**
- Already exists in template - keep as-is
- Add placeholder responses if AI Gateway not configured

**File Upload/Download:**
```
ui/src/components/FileUpload.tsx - Upload component
ui/src/components/FileList.tsx - File display
```

**User Login:**
```
ui/src/components/Login.tsx - Login page
ui/src/components/ProtectedRoute.tsx - Auth wrapper
```

**Connect to External Data:**
```
ui/src/services/api.ts - API client helpers
ui/src/hooks/useData.ts - Data fetching hooks
```

#### Visual Styling

If user provided visual inspiration:

**From image:**
- Extract dominant colors and apply to Tailwind config
- Match layout structure (sidebar vs top-nav)
- Use similar component styles (shadows, rounded corners, etc.)

**From description:**
- "Minimal" → Clean whites, subtle grays, lots of whitespace
- "Corporate/Professional" → Blues, structured layout, clear hierarchy
- "Modern" → Gradients, shadows, smooth animations
- "Colorful" → Vibrant accent colors, playful elements

#### Navigation

Create navigation based on selected features:
- If 3+ features → Use sidebar navigation
- If 1-2 features → Use simple top navigation
- Name nav items based on user's app description

#### Sample Data

Generate sample data that matches their use case:
- Use context from their description
- Include realistic names, dates, values
- Enough data to show how features work

### 3. Polish Level

Adjust based on purpose:

**Client Project:**
- Professional copy (no placeholder text like "Lorem ipsum")
- Polished micro-interactions
- Consistent spacing and alignment
- Error states and loading states

**Internal Tool:**
- Functional focus
- Clear but simple styling
- Fewer animations
- Direct, practical labels

**Personal/Learning:**
- Include code comments explaining how things work
- Simpler initial state
- Encourage experimentation

### 4. Build Plan (Plan Mode)

**BEFORE writing any code**, switch to Plan Mode to create an implementation plan:

1. **Switch to Plan Mode** using the SwitchMode tool with target_mode_id: "plan"
2. **Explain to user**: "Before I start building, let me create a plan so you can review what I'm going to create."

The plan should include:

**Architecture Overview:**
- List of components to create
- How they connect together
- Data flow between components

**Files to Create/Modify:**
- New component files with descriptions
- Existing files that need updates
- Configuration changes

**Implementation Order:**
- Which files to create first (dependencies)
- Logical build sequence
- Checkpoints for user review

**Sample Data Strategy:**
- What sample data will be generated
- How it relates to their app description
- Realistic names, dates, values to use

**Styling Approach:**
- Color scheme based on inspiration
- Layout structure (sidebar vs top-nav)
- Component styling patterns

After presenting the plan, ask the user to confirm before proceeding. Once confirmed, switch back to Agent mode and begin implementation.

### 5. Start the App

After customization:

**Docker (Recommended):**
```bash
cd deployer-apps/citizen-dev7/src
./scripts/docker-dev.sh
```

**Local Development:**
```bash
# Terminal 1: Backend
cd deployer-apps/citizen-dev7/src
uvicorn api:app --reload --port 3000

# Terminal 2: Frontend
cd deployer-apps/citizen-dev7/src/ui
npm install && npm run dev
```

### 6. Provide Next Steps

After app is running, provide tailored guidance:

- What to try first based on their features
- How to customize further
- Remind about `/help` for all commands
- Mention `/add-ai` if they selected chatbot but didn't configure AI Gateway

## File Structure Reference

```
deployer-apps/citizen-dev7/src/
├── ui/
│   ├── src/
│   │   ├── components/     # UI components (modify based on features)
│   │   ├── hooks/          # Custom React hooks
│   │   ├── services/       # API clients
│   │   ├── stores/         # Zustand stores
│   │   └── App.tsx         # Main app (update with navigation)
│   ├── package.json        # Update name
│   └── index.html          # Update title
├── api.py                  # FastAPI backend
├── agents/                 # AI agents (if using chatbot)
└── configs/                # Agent configurations
```

## Critical Instructions

1. **PLAN FIRST** - After collecting user inputs, switch to Plan Mode before writing any code:
   - Use SwitchMode tool with target_mode_id: "plan"
   - Present a clear implementation plan
   - Wait for user confirmation before building
   - This gives users visibility into what will be created

2. **WRITE CODE AFTER PLAN APPROVAL** - Once user confirms the plan, create/edit files:
   - Use the Write tool to create new component files
   - Use the StrReplace tool to modify existing files
   - DO NOT just describe what files should contain - actually write them!

3. **SHOW PROGRESS** - As you create each file, tell the user:
   - "✓ Created Dashboard.tsx with sample charts"
   - "✓ Updated App.tsx with navigation"
   - "✓ Applied blue color scheme"

4. **BUILD BEFORE RUNNING** - All code changes must happen BEFORE starting Docker/dev server

5. **USE TEMPLATES** - Reference code-templates/ for component patterns

6. **FOLLOW STYLE GUIDE** - Use patterns from ui/STYLE_GUIDE.md if it exists

7. **GENERATE REALISTIC CONTENT** - Sample data should match their app description:
   - If they said "project tracking" → use project names, dates, statuses
   - If they said "customer feedback" → use feedback entries, ratings
   - Never use "Lorem ipsum" or generic placeholders

8. **COMMIT PROGRESS** - Suggest user run `/commit` after major milestones
